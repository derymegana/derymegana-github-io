<!DOCTYPE html>
<html lang="en" id="html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DERY AI - Powerful AI Image Generator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6e00ff;
            --primary-dark: #4d00b5;
            --secondary: #00f7ff;
            --accent: #ff00aa;
            --text: #e0e0e0;
            --bg: #0a0a12;
            --card-bg: #151520;
            --border: #2a2a3a;
            --success: #00ff88;
            --warning: #ffaa00;
            --error: #ff4444;
            --light-text: #f8f8f8;
            --dark-text: #222;
            --shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            --neon-glow: 0 0 10px var(--primary), 0 0 20px var(--primary), 0 0 30px var(--primary);
            --secondary-glow: 0 0 5px var(--secondary), 0 0 10px var(--secondary);
        }

        [data-theme="light"] {
            --primary: #6e00ff;
            --primary-dark: #4d00b5;
            --secondary: #008cff;
            --accent: #ff0066;
            --text: #333;
            --bg: #f5f5ff;
            --card-bg: #ffffff;
            --border: #d0d0e0;
            --light-text: #f8f8f8;
            --dark-text: #222;
            --shadow: 0 4px 20px rgba(0, 0, 100, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s, color 0.3s, border-color 0.3s;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            padding: 20px 0;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            z-index: 1;
        }

        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse 15s infinite linear;
            z-index: -1;
        }

        @keyframes pulse {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            font-size: 2.5rem;
            color: var(--secondary);
            text-shadow: var(--secondary-glow);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .logo-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(to right, var(--secondary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .theme-toggle {
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text);
            border-radius: 30px;
            padding: 8px 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            transition: all 0.3s;
        }

        .theme-toggle:hover {
            background: var(--primary);
            color: var(--light-text);
            box-shadow: var(--neon-glow);
        }

        .theme-icon {
            font-size: 1.2rem;
        }

        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 5px;
            padding: 5px;
            z-index: 10;
        }

        .language-btn {
            background: none;
            border: none;
            color: var(--text);
            padding: 5px 10px;
            cursor: pointer;
            border-radius: 3px;
            font-size: 0.9rem;
        }

        .language-btn.active {
            background: var(--primary);
            color: white;
        }

        main {
            padding: 30px 0;
        }

        .generator-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 992px) {
            .generator-section {
                grid-template-columns: 1fr;
            }
        }

        .prompt-section, .settings-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
        }

        .section-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title i {
            font-size: 1.3rem;
        }

        .prompt-area {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid var(--border);
            background: rgba(0,0,0,0.1);
            color: var(--text);
            font-size: 1rem;
            resize: vertical;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .prompt-area:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(110, 0, 255, 0.2);
        }

        .prompt-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 30px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            box-shadow: var(--neon-glow);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: var(--card-bg);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-secondary:hover {
            background: var(--bg);
            transform: translateY(-2px);
        }

        .btn-accent {
            background: var(--accent);
            color: white;
        }

        .btn-accent:hover {
            box-shadow: 0 0 10px var(--accent), 0 0 20px rgba(255, 0, 170, 0.3);
            transform: translateY(-2px);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.9rem;
        }

        .negative-prompt-container {
            margin-top: 20px;
        }

        .negative-prompt-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
        }

        .negative-prompt-area {
            width: 100%;
            min-height: 80px;
            padding: 10px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: rgba(0,0,0,0.1);
            color: var(--text);
            font-size: 0.9rem;
            resize: vertical;
        }

        .settings-group {
            margin-bottom: 25px;
        }

        .settings-title {
            font-size: 1.1rem;
            margin-bottom: 12px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .settings-title i {
            font-size: 1rem;
        }

        .select-wrapper, .checkbox-group, .radio-group {
            margin-bottom: 15px;
        }

        select {
            width: 100%;
            padding: 10px 15px;
            border-radius: 8px;
            border: 1px solid var(--border);
            background: var(--card-bg);
            color: var(--text);
            font-size: 1rem;
            cursor: pointer;
        }

        select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(110, 0, 255, 0.2);
        }

        .checkbox-item, .radio-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
            cursor: pointer;
        }

        .checkbox-item input, .radio-item input {
            margin-right: 10px;
            cursor: pointer;
        }

        .slider-container {
            margin-bottom: 15px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }

        .slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--border);
            outline: none;
            -webkit-appearance: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }

        .slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0,0,0,0.2);
        }

        .generate-btn-container {
            text-align: center;
            margin: 30px 0;
        }

        .generate-btn {
            padding: 15px 30px;
            font-size: 1.2rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(110, 0, 255, 0.3);
        }

        .generate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(110, 0, 255, 0.4);
            background: linear-gradient(135deg, var(--primary-dark), var(--accent));
        }

        .generate-btn:active {
            transform: translateY(1px);
        }

        .results-section {
            margin-top: 40px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .result-card {
            background: var(--card-bg);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            border: 1px solid var(--border);
            transition: transform 0.3s;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .result-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            display: block;
        }

        .result-info {
            padding: 15px;
        }

        .result-prompt {
            font-size: 0.9rem;
            margin-bottom: 10px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .result-actions {
            display: flex;
            justify-content: space-between;
        }

        .history-section {
            margin-top: 40px;
        }

        .history-list {
            max-height: 300px;
            overflow-y: auto;
            background: var(--card-bg);
            border-radius: 10px;
            padding: 15px;
            border: 1px solid var(--border);
            margin-top: 15px;
        }

        .history-item {
            padding: 10px;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s;
        }

        .history-item:hover {
            background: rgba(110, 0, 255, 0.1);
        }

        .history-item:last-child {
            border-bottom: none;
        }

        .history-actions {
            display: flex;
            justify-content: flex-end;
            margin-top: 10px;
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 10, 18, 0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .loading-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(110, 0, 255, 0.2);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--secondary);
            text-shadow: var(--secondary-glow);
            position: relative;
        }

        .loading-text::after {
            content: '...';
            position: absolute;
            animation: dots 1.5s infinite steps(4);
        }

        @keyframes dots {
            0%, 20% { content: '.'; }
            40% { content: '..'; }
            60%, 100% { content: '...'; }
        }

        .share-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1001;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }

        .share-modal.active {
            opacity: 1;
            pointer-events: all;
        }

        .share-content {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 25px;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--text);
            cursor: pointer;
        }

        .share-options {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .share-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: var(--bg);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 15px 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .share-btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow);
        }

        .share-icon {
            font-size: 2rem;
            margin-bottom: 5px;
        }

        .facebook { color: #1877f2; }
        .twitter { color: #1da1f2; }
        .whatsapp { color: #25d366; }
        .instagram { color: #e1306c; }
        .tiktok { color: #000000; }
        .reddit { color: #ff5700; }
        .pinterest { color: #e60023; }
        .telegram { color: #0088cc; }

        .share-label {
            font-size: 0.8rem;
            text-align: center;
        }

        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltiptext {
            visibility: hidden;
            width: 200px;
            background-color: var(--card-bg);
            color: var(--text);
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid var(--border);
            box-shadow: var(--shadow);
            font-size: 0.8rem;
        }

        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        .advanced-settings {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .advanced-settings.active {
            max-height: 1000px;
            transition: max-height 0.5s ease-in;
        }

        .toggle-advanced {
            display: flex;
            align-items: center;
            gap: 8px;
            background: none;
            border: none;
            color: var(--text);
            cursor: pointer;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .toggle-advanced i {
            transition: transform 0.3s;
        }

        .toggle-advanced.active i {
            transform: rotate(180deg);
        }

        footer {
            background: var(--card-bg);
            padding: 30px 0;
            margin-top: 50px;
            border-top: 1px solid var(--border);
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 20px;
        }

        .copyright {
            font-size: 0.9rem;
            color: var(--text);
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-link {
            color: var(--text);
            font-size: 1.2rem;
            transition: color 0.3s, transform 0.3s;
        }

        .social-link:hover {
            color: var(--secondary);
            transform: translateY(-3px);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .prompt-actions {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .share-options {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Cyberpunk elements */
        .cyberpunk-border {
            position: relative;
            overflow: hidden;
        }

        .cyberpunk-border::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--accent), var(--primary));
            animation: borderGlow 3s linear infinite;
            background-size: 200% 100%;
        }

        @keyframes borderGlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .neon-text {
            text-shadow: 0 0 5px var(--secondary), 0 0 10px var(--secondary), 0 0 20px var(--secondary);
            animation: neonPulse 1.5s infinite alternate;
        }

        @keyframes neonPulse {
            from { text-shadow: 0 0 5px var(--secondary), 0 0 10px var(--secondary), 0 0 20px var(--secondary); }
            to { text-shadow: 0 0 10px var(--secondary), 0 0 20px var(--secondary), 0 0 30px var(--secondary); }
        }

        .grid-lines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(110, 0, 255, 0.05) 1px, transparent 1px),
                linear-gradient(90deg, rgba(110, 0, 255, 0.05) 1px, transparent 1px);
            background-size: 20px 20px;
            pointer-events: none;
            z-index: -1;
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--card-bg);
            color: var(--text);
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
            transform: translateX(150%);
            transition: transform 0.3s ease-out;
            z-index: 1002;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left-color: var(--success);
        }

        .notification.error {
            border-left-color: var(--error);
        }

        .notification.warning {
            border-left-color: var(--warning);
        }

        .notification-icon {
            font-size: 1.5rem;
        }

        .notification-close {
            margin-left: 15px;
            background: none;
            border: none;
            color: var(--text);
            cursor: pointer;
            font-size: 1.2rem;
        }
    </style>
</head>
<body>
    <div class="grid-lines"></div>
    
    <div class="language-switcher">
        <button class="language-btn active" data-lang="en">EN</button>
        <button class="language-btn" data-lang="id">ID</button>
    </div>
    
    <header class="cyberpunk-border">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-robot"></i>
                    </div>
                    <h1 class="logo-text">DERY AI</h1>
                </div>
                <button class="theme-toggle">
                    <i class="fas fa-moon theme-icon"></i>
                    <span class="lang-en">Dark Mode</span>
                    <span class="lang-id" style="display:none">Mode Gelap</span>
                </button>
            </div>
        </div>
    </header>
    
    <main class="container">
        <section class="generator-section">
            <div class="prompt-section">
                <h2 class="section-title">
                    <i class="fas fa-keyboard"></i>
                    <span class="lang-en">Prompt Generator</span>
                    <span class="lang-id" style="display:none">Generator Prompt</span>
                </h2>
                
                <textarea class="prompt-area" placeholder="Describe the image you want to generate..."></textarea>
                
                <div class="prompt-actions">
                    <button class="btn btn-primary btn-sm" id="enhance-prompt">
                        <i class="fas fa-magic"></i>
                        <span class="lang-en">Enhance Prompt</span>
                        <span class="lang-id" style="display:none">Tingkatkan Prompt</span>
                    </button>
                    <button class="btn btn-secondary btn-sm" id="random-prompt">
                        <i class="fas fa-random"></i>
                        <span class="lang-en">Random Prompt</span>
                        <span class="lang-id" style="display:none">Prompt Acak</span>
                    </button>
                    <button class="btn btn-secondary btn-sm" id="clear-prompt">
                        <i class="fas fa-trash"></i>
                        <span class="lang-en">Clear</span>
                        <span class="lang-id" style="display:none">Hapus</span>
                    </button>
                </div>
                
                <div class="negative-prompt-container">
                    <label for="negative-prompt" class="negative-prompt-label lang-en">Negative Prompt (what you don't want in the image):</label>
                    <label for="negative-prompt" class="negative-prompt-label lang-id" style="display:none">Prompt Negatif (yang tidak Anda inginkan dalam gambar):</label>
                    <textarea id="negative-prompt" class="negative-prompt-area" placeholder="blurry, low quality, distorted, etc."></textarea>
                </div>
            </div>
            
            <div class="settings-section">
                <h2 class="section-title">
                    <i class="fas fa-sliders-h"></i>
                    <span class="lang-en">Generation Settings</span>
                    <span class="lang-id" style="display:none">Pengaturan Generasi</span>
                </h2>
                
                <div class="settings-group">
                    <h3 class="settings-title">
                        <i class="fas fa-brain"></i>
                        <span class="lang-en">AI Model</span>
                        <span class="lang-id" style="display:none">Model AI</span>
                    </h3>
                    <div class="select-wrapper">
                        <select id="ai-model">
                            <option value="default">Default</option>
                            <option value="dall-e-3">DALL-E 3</option>
                            <option value="flux">Flux</option>
                            <option value="turbo">Turbo</option>
                            <option value="midjourney">Midjourney</option>
                            <option value="stable-diffusion">Stable Diffusion</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3 class="settings-title">
                        <i class="fas fa-paint-brush"></i>
                        <span class="lang-en">Art Style</span>
                        <span class="lang-id" style="display:none">Gaya Seni</span>
                    </h3>
                    <div class="select-wrapper">
                        <select id="art-style">
                            <option value="default">Default</option>
                            <option value="realistic">Realistic</option>
                            <option value="digital-art">Digital Art</option>
                            <option value="anime">Anime Style</option>
                            <option value="photography">Photography</option>
                            <option value="watercolor">Watercolor</option>
                            <option value="airbrush">Air Brush</option>
                            <option value="3d-render">3D Render</option>
                            <option value="surrealism">Surrealisme</option>
                            <option value="3d-disney">3D Disney Character</option>
                            <option value="studio-ghibli">Studio Ghibli</option>
                            <option value="caricature-3d">Caricature 3D</option>
                            <option value="cartoon">Cartoon</option>
                            <option value="graffiti">Graffiti Art</option>
                            <option value="pixel-art">Pixel Art</option>
                            <option value="steampunk">Steampunk</option>
                            <option value="cyberpunk">Cyberpunk</option>
                            <option value="psychedelic">Psychedelic</option>
                            <option value="fractal">Fractal Vortex</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3 class="settings-title">
                        <i class="fas fa-image"></i>
                        <span class="lang-en">Image Dimensions</span>
                        <span class="lang-id" style="display:none">Dimensi Gambar</span>
                    </h3>
                    <div class="select-wrapper">
                        <select id="aspect-ratio">
                            <option value="1:1">Square (1:1)</option>
                            <option value="4:3">Standard (4:3)</option>
                            <option value="16:9">Widescreen (16:9)</option>
                            <option value="9:16">Portrait (9:16)</option>
                            <option value="3:2">Classic (3:2)</option>
                            <option value="2:3">Tall (2:3)</option>
                        </select>
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span class="lang-en">Width: <span id="width-value">1024</span>px</span>
                            <span class="lang-id" style="display:none">Lebar: <span id="width-value-id">1024</span>px</span>
                        </div>
                        <input type="range" id="width-slider" class="slider" min="1024" max="3840" value="1024" step="64">
                    </div>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span class="lang-en">Height: <span id="height-value">1024</span>px</span>
                            <span class="lang-id" style="display:none">Tinggi: <span id="height-value-id">1024</span>px</span>
                        </div>
                        <input type="range" id="height-slider" class="slider" min="1024" max="3840" value="1024" step="64">
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3 class="settings-title">
                        <i class="fas fa-cog"></i>
                        <span class="lang-en">Quality Settings</span>
                        <span class="lang-id" style="display:none">Pengaturan Kualitas</span>
                    </h3>
                    <div class="slider-container">
                        <div class="slider-label">
                            <span class="lang-en">Steps: <span id="steps-value">50</span></span>
                            <span class="lang-id" style="display:none">Langkah: <span id="steps-value-id">50</span></span>
                        </div>
                        <input type="range" id="steps-slider" class="slider" min="50" max="100" value="50">
                    </div>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="enhance-detail" checked>
                            <label for="enhance-detail" class="lang-en">Ultra Detail Enhancement</label>
                            <label for="enhance-detail" class="lang-id" style="display:none">Peningkatan Detail Ultra</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="high-res" checked>
                            <label for="high-res" class="lang-en">Ultra High Resolution</label>
                            <label for="high-res" class="lang-id" style="display:none">Resolusi Ultra Tinggi</label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3 class="settings-title">
                        <i class="fas fa-lightbulb"></i>
                        <span class="lang-en">Lighting Effects</span>
                        <span class="lang-id" style="display:none">Efek Pencahayaan</span>
                    </h3>
                    <div class="select-wrapper">
                        <select id="lighting-effect">
                            <option value="default">Default</option>
                            <option value="hdr">HDR</option>
                            <option value="ultra-detail">Detail Ultra</option>
                            <option value="cinematic">Cinematic Lighting</option>
                            <option value="neon">Neon Glow</option>
                            <option value="photorealistic">Photorealistic</option>
                            <option value="drama">Drama Light</option>
                            <option value="night">Night Mode</option>
                        </select>
                    </div>
                </div>
                
                <div class="settings-group">
                    <h3 class="settings-title">
                        <i class="fas fa-shield-alt"></i>
                        <span class="lang-en">Content Filter</span>
                        <span class="lang-id" style="display:none">Filter Konten</span>
                    </h3>
                    <div class="checkbox-item">
                        <input type="checkbox" id="nsfw-filter" checked>
                        <label for="nsfw-filter" class="lang-en">Safe Content (NSFW filter)</label>
                        <label for="nsfw-filter" class="lang-id" style="display:none">Konten Aman (filter NSFW)</label>
                    </div>
                </div>
                
                <button class="toggle-advanced" id="toggle-advanced">
                    <i class="fas fa-chevron-down"></i>
                    <span class="lang-en">Advanced Settings</span>
                    <span class="lang-id" style="display:none">Pengaturan Lanjutan</span>
                </button>
                
                <div class="advanced-settings" id="advanced-settings">
                    <div class="settings-group">
                        <h3 class="settings-title">
                            <i class="fas fa-palette"></i>
                            <span class="lang-en">Color Palette</span>
                            <span class="lang-id" style="display:none">Palet Warna</span>
                        </h3>
                        <div class="select-wrapper">
                            <select id="color-palette">
                                <option value="default">Default</option>
                                <option value="vibrant">Vibrant</option>
                                <option value="pastel">Pastel</option>
                                <option value="monochrome">Monochrome</option>
                                <option value="warm">Warm Tones</option>
                                <option value="cool">Cool Tones</option>
                                <option value="rgb">RGB</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <h3 class="settings-title">
                            <i class="fas fa-camera"></i>
                            <span class="lang-en">Composition</span>
                            <span class="lang-id" style="display:none">Komposisi</span>
                        </h3>
                        <div class="select-wrapper">
                            <select id="composition">
                                <option value="default">Default</option>
                                <option value="close-up">Close-up</option>
                                <option value="wide-shot">Wide Shot</option>
                                <option value="macro">Macro</option>
                                <option value="aerial">Aerial</option>
                                <option value="low-angle">Low View Angle</option>
                                <option value="drone">Drone Wide Angle</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-group">
                        <h3 class="settings-title">
                            <i class="fas fa-file-image"></i>
                            <span class="lang-en">Image Format</span>
                            <span class="lang-id" style="display:none">Format Gambar</span>
                        </h3>
                        <div class="radio-group">
                            <div class="radio-item">
                                <input type="radio" id="format-png" name="image-format" value="png" checked>
                                <label for="format-png">PNG</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="format-jpeg" name="image-format" value="jpeg">
                                <label for="format-jpeg">JPEG</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="format-jpg" name="image-format" value="jpg">
                                <label for="format-jpg">JPG</label>
                            </div>
                            <div class="radio-item">
                                <input type="radio" id="format-webp" name="image-format" value="webp">
                                <label for="format-webp">WEBP</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <div class="generate-btn-container">
            <button class="generate-btn" id="generate-btn">
                <i class="fas fa-bolt"></i>
                <span class="lang-en">Generate Image</span>
                <span class="lang-id" style="display:none">Hasilkan Gambar</span>
            </button>
        </div>
        
        <section class="results-section">
            <h2 class="section-title">
                <i class="fas fa-images"></i>
                <span class="lang-en">Generated Images</span>
                <span class="lang-id" style="display:none">Gambar yang Dihasilkan</span>
            </h2>
            <div class="results-grid" id="results-grid">
                <!-- Generated images will appear here -->
            </div>
        </section>
        
        <section class="history-section">
            <h2 class="section-title">
                <i class="fas fa-history"></i>
                <span class="lang-en">Prompt History</span>
                <span class="lang-id" style="display:none">Riwayat Prompt</span>
            </h2>
            <div class="history-list" id="history-list">
                <!-- History items will appear here -->
            </div>
            <div class="history-actions">
                <button class="btn btn-secondary btn-sm" id="clear-history">
                    <i class="fas fa-trash"></i>
                    <span class="lang-en">Clear History</span>
                    <span class="lang-id" style="display:none">Hapus Riwayat</span>
                </button>
            </div>
        </section>
    </main>
    
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <div class="loading-text neon-text">DERY AI Loading</div>
    </div>
    
    <div class="share-modal" id="share-modal">
        <div class="share-content">
            <button class="close-modal" id="close-share-modal">&times;</button>
            <h3 class="section-title">
                <i class="fas fa-share-alt"></i>
                <span class="lang-en">Share Image</span>
                <span class="lang-id" style="display:none">Bagikan Gambar</span>
            </h3>
            <div class="share-options">
                <button class="share-btn" data-platform="facebook">
                    <i class="fab fa-facebook-f share-icon facebook"></i>
                    <span class="share-label">Facebook</span>
                </button>
                <button class="share-btn" data-platform="twitter">
                    <i class="fab fa-twitter share-icon twitter"></i>
                    <span class="share-label">Twitter</span>
                </button>
                <button class="share-btn" data-platform="whatsapp">
                    <i class="fab fa-whatsapp share-icon whatsapp"></i>
                    <span class="share-label">WhatsApp</span>
                </button>
                <button class="share-btn" data-platform="instagram">
                    <i class="fab fa-instagram share-icon instagram"></i>
                    <span class="share-label">Instagram</span>
                </button>
                <button class="share-btn" data-platform="tiktok">
                    <i class="fab fa-tiktok share-icon tiktok"></i>
                    <span class="share-label">TikTok</span>
                </button>
                <button class="share-btn" data-platform="reddit">
                    <i class="fab fa-reddit-alien share-icon reddit"></i>
                    <span class="share-label">Reddit</span>
                </button>
                <button class="share-btn" data-platform="pinterest">
                    <i class="fab fa-pinterest-p share-icon pinterest"></i>
                    <span class="share-label">Pinterest</span>
                </button>
                <button class="share-btn" data-platform="telegram">
                    <i class="fab fa-telegram-plane share-icon telegram"></i>
                    <span class="share-label">Telegram</span>
                </button>
            </div>
        </div>
    </div>
    
    <div class="notification" id="notification">
        <i class="fas fa-check-circle notification-icon"></i>
        <span class="notification-message">Image generated successfully!</span>
        <button class="notification-close">&times;</button>
    </div>
    
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="copyright">
                    &copy; 2025 DERY AI GENERATOR Powered by Pollinations API<br>
                    Developed by Dery Lau, Thanks to Github & Cloudflare
                </div>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-github"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-discord"></i></a>
                </div>
            </div>
        </div>
    </footer>
    
    <script>
        // DOM Elements
        const themeToggle = document.querySelector('.theme-toggle');
        const html = document.getElementById('html');
        const themeIcon = document.querySelector('.theme-icon');
        const promptArea = document.querySelector('.prompt-area');
        const negativePrompt = document.getElementById('negative-prompt');
        const enhancePromptBtn = document.getElementById('enhance-prompt');
        const randomPromptBtn = document.getElementById('random-prompt');
        const clearPromptBtn = document.getElementById('clear-prompt');
        const generateBtn = document.getElementById('generate-btn');
        const resultsGrid = document.getElementById('results-grid');
        const historyList = document.getElementById('history-list');
        const clearHistoryBtn = document.getElementById('clear-history');
        const loadingOverlay = document.getElementById('loading-overlay');
        const shareModal = document.getElementById('share-modal');
        const closeShareModal = document.getElementById('close-share-modal');
        const shareBtns = document.querySelectorAll('.share-btn');
        const notification = document.getElementById('notification');
        const notificationClose = document.querySelector('.notification-close');
        const toggleAdvanced = document.getElementById('toggle-advanced');
        const advancedSettings = document.getElementById('advanced-settings');
        const languageBtns = document.querySelectorAll('.language-btn');
        
        // Settings elements
        const aiModel = document.getElementById('ai-model');
        const artStyle = document.getElementById('art-style');
        const aspectRatio = document.getElementById('aspect-ratio');
        const widthSlider = document.getElementById('width-slider');
        const heightSlider = document.getElementById('height-slider');
        const widthValue = document.getElementById('width-value');
        const widthValueId = document.getElementById('width-value-id');
        const heightValue = document.getElementById('height-value');
        const heightValueId = document.getElementById('height-value-id');
        const stepsSlider = document.getElementById('steps-slider');
        const stepsValue = document.getElementById('steps-value');
        const stepsValueId = document.getElementById('steps-value-id');
        const enhanceDetail = document.getElementById('enhance-detail');
        const highRes = document.getElementById('high-res');
        const lightingEffect = document.getElementById('lighting-effect');
        const nsfwFilter = document.getElementById('nsfw-filter');
        const colorPalette = document.getElementById('color-palette');
        const composition = document.getElementById('composition');
        const imageFormats = document.querySelectorAll('input[name="image-format"]');
        
        // Theme toggle
        themeToggle.addEventListener('click', () => {
            html.setAttribute('data-theme', html.getAttribute('data-theme') === 'light' ? 'dark' : 'light');
            themeIcon.className = html.getAttribute('data-theme') === 'light' ? 'fas fa-sun theme-icon' : 'fas fa-moon theme-icon';
            saveToLocalStorage('theme', html.getAttribute('data-theme'));
        });
        
        // Initialize theme from localStorage
        const savedTheme = getFromLocalStorage('theme') || 'dark';
        html.setAttribute('data-theme', savedTheme);
        themeIcon.className = savedTheme === 'light' ? 'fas fa-sun theme-icon' : 'fas fa-moon theme-icon';
        
        // Language switcher
        languageBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                languageBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                const lang = btn.dataset.lang;
                document.querySelectorAll('.lang-en').forEach(el => {
                    el.style.display = lang === 'en' ? 'inline' : 'none';
                });
                document.querySelectorAll('.lang-id').forEach(el => {
                    el.style.display = lang === 'id' ? 'inline' : 'none';
                });
                
                saveToLocalStorage('language', lang);
            });
        });
        
        // Initialize language from localStorage
        const savedLanguage = getFromLocalStorage('language') || 'en';
        document.querySelector(`.language-btn[data-lang="${savedLanguage}"]`).click();
        
        // Aspect ratio handling
        aspectRatio.addEventListener('change', () => {
            const ratio = aspectRatio.value;
            let width, height;
            
            switch(ratio) {
                case '1:1':
                    width = height = 1024;
                    break;
                case '4:3':
                    width = 1366;
                    height = 1024;
                    break;
                case '16:9':
                    width = 1920;
                    height = 1080;
                    break;
                case '9:16':
                    width = 1080;
                    height = 1920;
                    break;
                case '3:2':
                    width = 1536;
                    height = 1024;
                    break;
                case '2:3':
                    width = 1024;
                    height = 1536;
                    break;
            }
            
            widthSlider.value = width;
            heightSlider.value = height;
            updateDimensionValues();
        });
        
        // Update dimension values
        function updateDimensionValues() {
            widthValue.textContent = widthSlider.value;
            widthValueId.textContent = widthSlider.value;
            heightValue.textContent = heightSlider.value;
            heightValueId.textContent = heightSlider.value;
        }
        
        widthSlider.addEventListener('input', updateDimensionValues);
        heightSlider.addEventListener('input', updateDimensionValues);
        
        // Steps slider
        stepsSlider.addEventListener('input', () => {
            stepsValue.textContent = stepsSlider.value;
            stepsValueId.textContent = stepsSlider.value;
        });
        
        // Toggle advanced settings
        toggleAdvanced.addEventListener('click', () => {
            advancedSettings.classList.toggle('active');
            toggleAdvanced.classList.toggle('active');
        });
        
        // Random prompts
        const randomPrompts = [
            "A cyberpunk cityscape at night with neon lights and flying cars, ultra detailed, 8k",
            "A majestic dragon perched on a mountain peak, fantasy art style, cinematic lighting",
            "A futuristic robot with intricate mechanical details, standing in a field of flowers",
            "An astronaut exploring an alien planet with strange plants and creatures, photorealistic",
            "A serene landscape with a crystal clear lake and snow-capped mountains, golden hour lighting",
            "A steampunk airship flying through clouds, detailed brass and copper machinery",
            "A magical forest with glowing plants and fairies, digital art style, vibrant colors",
            "A portrait of a beautiful elf with intricate jewelry and flowing hair, fantasy art",
            "A futuristic megacity with towering skyscrapers and holographic advertisements",
            "A cute 3D render of a cartoon animal wearing a spacesuit, Pixar style",
            "An ancient temple hidden in the jungle, overgrown with vines and mysterious artifacts",
            "A surreal dreamscape with floating islands and impossible architecture",
            "A detailed close-up of a futuristic cybernetic eye with glowing circuits",
            "A cozy cabin in the woods during winter, smoke coming from the chimney, warm lighting",
            "A battle between knights and dragons in a medieval castle, dramatic lighting"
        ];
        
        randomPromptBtn.addEventListener('click', () => {
            const randomIndex = Math.floor(Math.random() * randomPrompts.length);
            promptArea.value = randomPrompts[randomIndex];
        });
        
        // Enhance prompt
        enhancePromptBtn.addEventListener('click', () => {
            if (!promptArea.value.trim()) {
                showNotification('Please enter a prompt first', 'error');
                return;
            }
            
            // Simple enhancement - in a real app you might use an API for this
            const enhancedPrompt = `${promptArea.value}, ${artStyle.options[artStyle.selectedIndex].text}, ${lightingEffect.options[lightingEffect.selectedIndex].text} lighting, ultra detailed, 8k resolution`;
            promptArea.value = enhancedPrompt;
            showNotification('Prompt enhanced successfully', 'success');
        });
        
        // Clear prompt
        clearPromptBtn.addEventListener('click', () => {
            promptArea.value = '';
            negativePrompt.value = '';
        });
        
        // Generate image
        generateBtn.addEventListener('click', async () => {
            if (!promptArea.value.trim()) {
                showNotification('Please enter a prompt', 'error');
                return;
            }
            
            // Build the prompt with all settings
            let fullPrompt = promptArea.value;
            
            // Add style if not default
            if (artStyle.value !== 'default') {
                fullPrompt += `, ${artStyle.value} style`;
            }
            
            // Add lighting if not default
            if (lightingEffect.value !== 'default') {
                fullPrompt += `, ${lightingEffect.value} lighting`;
            }
            
            // Add color palette if not default
            if (colorPalette.value !== 'default') {
                fullPrompt += `, ${colorPalette.value} color palette`;
            }
            
            // Add composition if not default
            if (composition.value !== 'default') {
                fullPrompt += `, ${composition.value} composition`;
            }
            
            // Add quality enhancements
            if (enhanceDetail.checked) {
                fullPrompt += ', ultra detailed';
            }
            
            if (highRes.checked) {
                fullPrompt += ', 8k resolution';
            }
            
            // Add negative prompt if exists
            let negativePromptText = '';
            if (negativePrompt.value.trim()) {
                negativePromptText = negativePrompt.value.trim();
            }
            
            // Show loading
            loadingOverlay.classList.add('active');
            
            try {
                // Get selected format
                let selectedFormat = 'png';
                imageFormats.forEach(format => {
                    if (format.checked) selectedFormat = format.value;
                });
                
                // Build API URL
                const width = widthSlider.value;
                const height = heightSlider.value;
                const steps = stepsSlider.value;
                const model = aiModel.value === 'default' ? '' : `model=${aiModel.value}&`;
                const nsfw = nsfwFilter.checked ? 'nsfw=false&' : '';
                
                // Encode prompt for URL
                const encodedPrompt = encodeURIComponent(fullPrompt);
                const encodedNegative = negativePromptText ? `&negative=${encodeURIComponent(negativePromptText)}` : '';
                
                const apiUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?${model}${nsfw}width=${width}&height=${height}&steps=${steps}${encodedNegative}&nologo=true&format=${selectedFormat}`;
                
                // Create result card immediately with loading state
                const tempImageUrl = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiIHZpZXdCb3g9IjAgMCAxMDI0IDEwMjQiIGZpbGw9Im5vbmUiPgogIDxyZWN0IHdpZHRoPSIxMDI0IiBoZWlnaHQ9IjEwMjQiIGZpbGw9IiMxNTE1MjAiLz4KICA8cGF0aCBkPSJNNTQ0IDI5NEM1NDQgMzEwLjUxNyA1MzAuNTE3IDMyNCA1MTQgMzI0QzQ5Ny40ODMgMzI0IDQ4NCAzMTAuNTE3IDQ4NCAyOTRDNDg0IDI3Ny40ODMgNDk3LjQ4MyAyNjQgNTE0IDI2NEM1MzAuNTE3IDI2NCA1NDQgMjc3LjQ4MyA1NDQgMjk0WiIgZmlsbD0iIzZlMDBmZiIvPgogIDxwYXRoIGQ9Ik01MTQgNzY4QzUzMC41MTcgNzY4IDU0NCA3NTQuNTE3IDU0NCA3MzhDNTQ0IDcyMS40ODMgNTMwLjUxNyA3MDggNTE0IDcwOEM0OTcuNDgzIDcwOCA0ODQgNzIxLjQ4MyA0ODQgNzM4QzQ4NCA3NTQuNTE3IDQ5Ny40ODMgNzY4IDUxNCA3NjhaIiBmaWxsPSIjMDBmN2ZmIi8+CiAgPHBhdGggZD0iTTI5NCA1MDRDMjk0IDUyMC41MTcgMjgwLjUxNyA1MzQgMjY0IDUzNEMyNDcuNDgzIDUzNCAyMzQgNTIwLjUxNyAyMzQgNTA0QzIzNCA0ODcuNDgzIDI0Ny40ODMgNDc0IDI2NCA0NzRDMjgwLjUxNyA0NzQgMjk0IDQ4Ny40ODMgMjk0IDUwNFoiIGZpbGw9IiNmZjAwYWEiLz4KICA8cGF0aCBkPSJNNzY4IDUwNEM3NjggNTIwLjUxNyA3NTQuNTE3IDUzNCA3MzggNTM0QzcyMS40ODMgNTM0IDcwOCA1MjAuNTE3IDcwOCA1MDRDNzA4IDQ4Ny40ODMgNzIxLjQ4MyA0NzQgNzM4IDQ3NEM3NTQuNTE3IDQ3NCA3NjggNDg3LjQ4MyA3NjggNTA0WiIgZmlsbD0iI2ZmMDBhYSIvPgogIDxwYXRoIGQ9Ik0zOTQgNjg0QzQxMC41MTcgNjg0IDQyNCA2NzAuNTE3IDQyNCA2NTRDNDI0IDYzNy40ODMgNDEwLjUxNyA2MjQgMzk0IDYyNEMzNzcuNDgzIDYyNCAzNjQgNjM3LjQ4MyAzNjQgNjU0QzM2NCA2NzAuNTE3IDM3Ny40ODMgNjg0IDM5NCA2ODRaIiBmaWxsPSIjMDBmN2ZmIi8+CiAgPHBhdGggZD0iTTYzNiA2NTRDNjM2IDY3MC41MTcgNjIyLjUxNyA2ODQgNjA2IDY4NEM1ODkuNDgzIDY4NCA1NzYgNjcwLjUxNyA1NzYgNjU0QzU3NiA2MzcuNDgzIDU4OS40ODMgNjI0IDYwNiA2MjRDNjIyLjUxNyA2MjQgNjM2IDYzNy40ODMgNjM2IDY1NFoiIGZpbGw9IiM2ZTAwZmYiLz4KICA8cGF0aCBkPSJNMzgwIDM2NEMzOTYuNTE3IDM2NCA0MTAgMzUwLjUxNyA0MTAgMzM0QzQxMCAzMTcuNDgzIDM5Ni41MTcgMzA0IDM4MCAzMDRDMzYzLjQ4MyAzMDQgMzUwIDMxNy40ODMgMzUwIDMzNEMzNTAgMzUwLjUxNyAzNjMuNDgzIDM2NCAzODAgMzY0WiIgZmlsbD0iIzZlMDBmZiIvPgogIDxwYXRoIGQ9Ik02NTAgMzM0QzY1MCAzNTAuNTE3IDYzNi41MTcgMzY0IDYyMCAzNjRDNjAzLjQ4MyAzNjQgNTkwIDM1MC41MTcgNTkwIDMzNEM1OTAgMzE3LjQ4MyA2MDMuNDgzIDMwNCA2MjAgMzA0QzYzNi41MTcgMzA0IDY1MCAzMTcuNDgzIDY1MCAzMzRaIiBmaWxsPSIjMDBmN2ZmIi8+CiAgPHBhdGggZD0iTTUxNCA1MTRDNTE0IDUxNi4yMDkgNTEyLjIwOSA1MTggNTEwIDUxOEM1MDcuNzkxIDUxOCA1MDYgNTE2LjIwOSA1MDYgNTE0QzUwNiA1MTEuNzkxIDUwNy43OTEgNTEwIDUxMCA1MTBDNTEyLjIwOSA1MTAgNTE0IDUxMS43OTEgNTE0IDUxNFoiIGZpbGw9IiNmZmZmZmYiLz4KICA8YW5pbWF0ZVRyYW5zZm9ybSBhdHRyaWJ1dGVOYW1lPSJ0cmFuc2Zvcm0iIHR5cGU9InJvdGF0ZSIgZnJvbT0iMCA1MTIgNTEyIiB0bz0iMzYwIDUxMiA1MTIiIGR1cj0iMTBzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIvPgo8L3N2Zz4=';
                createResultCard(fullPrompt, tempImageUrl);
                
                // Generate image
                const response = await fetch(apiUrl);
                
                if (!response.ok) {
                    throw new Error('Failed to generate image');
                }
                
                const blob = await response.blob();
                const imageUrl = URL.createObjectURL(blob);
                
                // Replace the temporary image with the generated one
                const firstCard = resultsGrid.firstChild;
                if (firstCard) {
                    const img = firstCard.querySelector('.result-image');
                    if (img) {
                        img.src = imageUrl;
                        img.onload = () => {
                            // Update the download URL
                            const downloadBtn = firstCard.querySelector('.download-btn');
                            if (downloadBtn) {
                                downloadBtn.dataset.url = imageUrl;
                            }
                        };
                    }
                }
                
                // Save to history
                addToHistory(fullPrompt, imageUrl);
                
                showNotification('Image generated successfully!', 'success');
            } catch (error) {
                console.error('Error generating image:', error);
                showNotification('Failed to generate image. Please try again.', 'error');
                
                // Remove the temporary card if there was an error
                if (resultsGrid.firstChild) {
                    resultsGrid.removeChild(resultsGrid.firstChild);
                }
            } finally {
                loadingOverlay.classList.remove('active');
            }
        });
        
        // Create result card
        function createResultCard(prompt, imageUrl) {
            const card = document.createElement('div');
            card.className = 'result-card';
            
            card.innerHTML = `
                <img src="${imageUrl}" alt="Generated image" class="result-image" loading="lazy">
                <div class="result-info">
                    <p class="result-prompt" title="${prompt}">${truncatePrompt(prompt)}</p>
                    <div class="result-actions">
                        <button class="btn btn-secondary btn-sm download-btn" data-url="${imageUrl}">
                            <i class="fas fa-download"></i>
                            <span class="lang-en">Download</span>
                            <span class="lang-id" style="display:none">Unduh</span>
                        </button>
                        <button class="btn btn-accent btn-sm share-btn" data-url="${imageUrl}" data-prompt="${prompt}">
                            <i class="fas fa-share-alt"></i>
                            <span class="lang-en">Share</span>
                            <span class="lang-id" style="display:none">Bagikan</span>
                        </button>
                    </div>
                </div>
            `;
            
            // Prepend to results grid
            resultsGrid.insertBefore(card, resultsGrid.firstChild);
            
            // Add event listeners to the new buttons
            card.querySelector('.download-btn').addEventListener('click', (e) => {
                downloadImage(e.target.closest('.download-btn').dataset.url);
            });
            
            card.querySelector('.share-btn').addEventListener('click', (e) => {
                const btn = e.target.closest('.share-btn');
                openShareModal(btn.dataset.url, btn.dataset.prompt);
            });
        }
        
        // Truncate prompt for display
        function truncatePrompt(prompt, maxLength = 100) {
            return prompt.length > maxLength ? prompt.substring(0, maxLength) + '...' : prompt;
        }
        
        // Download image
        function downloadImage(url) {
            // Don't download the placeholder image
            if (url.includes('data:image/svg+xml')) {
                showNotification('Please wait for image to finish generating', 'warning');
                return;
            }
            
            const link = document.createElement('a');
            link.href = url;
            
            // Extract filename from URL or create one
            const filename = `dery-ai-${Date.now()}.${url.split('.').pop().split('?')[0]}`;
            link.download = filename;
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification('Download started', 'success');
        }
        
        // Share modal
        function openShareModal(imageUrl, prompt) {
            // Don't share the placeholder image
            if (imageUrl.includes('data:image/svg+xml')) {
                showNotification('Please wait for image to finish generating', 'warning');
                return;
            }
            
            shareModal.classList.add('active');
            
            // Set data attributes for all share buttons
            shareBtns.forEach(btn => {
                btn.dataset.url = imageUrl;
                btn.dataset.prompt = prompt;
            });
        }
        
        closeShareModal.addEventListener('click', () => {
            shareModal.classList.remove('active');
        });
        
        // Share handlers
        shareBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const platform = btn.dataset.platform;
                const url = btn.dataset.url;
                const prompt = btn.dataset.prompt;
                let shareUrl = '';
                
                switch(platform) {
                    case 'facebook':
                        shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(prompt)}`;
                        break;
                    case 'twitter':
                        shareUrl = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(prompt)}`;
                        break;
                    case 'whatsapp':
                        shareUrl = `https://wa.me/?text=${encodeURIComponent(`${prompt} ${url}`)}`;
                        break;
                    case 'instagram':
                        // Instagram doesn't support direct sharing, open in new tab
                        shareUrl = url;
                        break;
                    case 'tiktok':
                        // TikTok doesn't support direct sharing, open in new tab
                        shareUrl = url;
                        break;
                    case 'reddit':
                        shareUrl = `https://www.reddit.com/submit?url=${encodeURIComponent(url)}&title=${encodeURIComponent(prompt)}`;
                        break;
                    case 'pinterest':
                        shareUrl = `https://pinterest.com/pin/create/button/?url=${encodeURIComponent(url)}&description=${encodeURIComponent(prompt)}`;
                        break;
                    case 'telegram':
                        shareUrl = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(prompt)}`;
                        break;
                }
                
                window.open(shareUrl, '_blank', 'noopener,noreferrer');
                shareModal.classList.remove('active');
            });
        });
        
        // History functionality
        function addToHistory(prompt, imageUrl) {
            // Don't add placeholder images to history
            if (imageUrl.includes('data:image/svg+xml')) return;
            
            // Get existing history
            let history = getFromLocalStorage('promptHistory') || [];
            
            // Add new item
            history.unshift({
                prompt,
                imageUrl,
                timestamp: new Date().toISOString()
            });
            
            // Limit to 50 items
            if (history.length > 50) {
                history = history.slice(0, 50);
            }
            
            // Save to localStorage
            saveToLocalStorage('promptHistory', history);
            
            // Update history display
            updateHistoryDisplay();
        }
        
        function updateHistoryDisplay() {
            const history = getFromLocalStorage('promptHistory') || [];
            historyList.innerHTML = '';
            
            if (history.length === 0) {
                const emptyMsg = document.createElement('div');
                emptyMsg.className = 'lang-en';
                emptyMsg.textContent = 'No history yet';
                
                const emptyMsgId = document.createElement('div');
                emptyMsgId.className = 'lang-id';
                emptyMsgId.textContent = 'Belum ada riwayat';
                emptyMsgId.style.display = 'none';
                
                historyList.appendChild(emptyMsg);
                historyList.appendChild(emptyMsgId);
                return;
            }
            
            history.forEach((item, index) => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.dataset.index = index;
                
                const date = new Date(item.timestamp);
                const dateStr = date.toLocaleString();
                
                historyItem.innerHTML = `
                    <div class="lang-en">
                        <strong>${truncatePrompt(item.prompt)}</strong>
                        <div style="font-size:0.8rem;color:#aaa;">${dateStr}</div>
                    </div>
                    <div class="lang-id" style="display:none">
                        <strong>${truncatePrompt(item.prompt)}</strong>
                        <div style="font-size:0.8rem;color:#aaa;">${dateStr}</div>
                    </div>
                `;
                
                historyItem.addEventListener('click', () => {
                    promptArea.value = item.prompt;
                    
                    // Try to extract negative prompt if exists
                    if (item.imageUrl.includes('negative=')) {
                        const negativeMatch = item.imageUrl.match(/negative=([^&]+)/);
                        if (negativeMatch) {
                            negativePrompt.value = decodeURIComponent(negativeMatch[1]);
                        }
                    }
                    
                    // Scroll to prompt area
                    promptArea.scrollIntoView({ behavior: 'smooth' });
                    promptArea.focus();
                });
                
                historyList.appendChild(historyItem);
            });
        }
        
        // Clear history
        clearHistoryBtn.addEventListener('click', () => {
            if (confirm(document.querySelector('.language-btn.active').dataset.lang === 'en' ? 
                'Are you sure you want to clear all history?' : 
                'Apakah Anda yakin ingin menghapus semua riwayat?')) {
                localStorage.removeItem('promptHistory');
                updateHistoryDisplay();
                showNotification('History cleared', 'success');
            }
        });
        
        // Initialize history display
        updateHistoryDisplay();
        
        // Notification system
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const icon = notification.querySelector('.notification-icon');
            const messageEl = notification.querySelector('.notification-message');
            
            // Set content and style
            messageEl.textContent = message;
            notification.className = `notification ${type}`;
            
            // Set icon based on type
            switch(type) {
                case 'success':
                    icon.className = 'fas fa-check-circle notification-icon';
                    break;
                case 'error':
                    icon.className = 'fas fa-exclamation-circle notification-icon';
                    break;
                case 'warning':
                    icon.className = 'fas fa-exclamation-triangle notification-icon';
                    break;
            }
            
            // Show notification
            notification.classList.add('show');
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }
        
        notificationClose.addEventListener('click', () => {
            notification.classList.remove('show');
        });
        
        // LocalStorage helpers
        function saveToLocalStorage(key, value) {
            localStorage.setItem(key, JSON.stringify(value));
        }
        
        function getFromLocalStorage(key) {
            const value = localStorage.getItem(key);
            return value ? JSON.parse(value) : null;
        }
        
        // Initialize dimension values
        updateDimensionValues();
        stepsValue.textContent = stepsSlider.value;
        stepsValueId.textContent = stepsSlider.value;
    </script>
</body>
</html>
