<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DERY AI GENERATOR - Powerful AI Image Generation</title>
    <style>
        :root {
            --primary-color: #ffd700;
            --secondary-color: #ff8c00;
            --bg-color: #0a0a12;
            --panel-color: #1a1a2e;
            --text-color: #ffffff;
            --accent-color: #00ffff;
            --error-color: #ff3860;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Orbitron', 'Arial', sans-serif;
        }

        @font-face {
            font-family: 'Orbitron';
            src: url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap');
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            background-image: 
                radial-gradient(circle at 25% 25%, rgba(255, 215, 0, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 75% 75%, rgba(0, 255, 255, 0.1) 0%, transparent 50%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255, 215, 0, 0.3);
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo h1 {
            font-size: 2.5rem;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
            letter-spacing: 2px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 20px var(--primary-color);
        }

        .logo-icon::before {
            content: "AI";
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--bg-color);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
        }

        .control-panel {
            background-color: var(--panel-color);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.2);
            position: relative;
            overflow: hidden;
        }

        .control-panel::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color), var(--accent-color));
        }

        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .panel-title::before {
            content: "‚óà";
            color: var(--accent-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.8);
        }

        textarea, select, input[type="range"], input[type="number"] {
            width: 100%;
            padding: 12px 15px;
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            color: var(--text-color);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        textarea:focus, select:focus, input[type="range"]:focus, input[type="number"]:focus {
            outline: none;
            border-color: var(--accent-color);
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        textarea {
            min-height: 120px;
            resize: vertical;
        }

        .range-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .range-value {
            min-width: 50px;
            text-align: center;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 5px 10px;
            border-radius: 5px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-item {
            position: relative;
        }

        .checkbox-item input[type="checkbox"] {
            position: absolute;
            opacity: 0;
        }

        .checkbox-item label {
            display: inline-block;
            padding: 8px 15px;
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .checkbox-item input[type="checkbox"]:checked + label {
            background-color: var(--accent-color);
            color: var(--bg-color);
            border-color: var(--accent-color);
            font-weight: bold;
        }

        .checkbox-item input[type="checkbox"]:focus + label {
            box-shadow: 0 0 5px var(--accent-color);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: #000;
            border: none;
            padding: 15px 25px;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-generate::before {
            content: "‚ö°";
            font-size: 1.2rem;
        }

        .results-container {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .image-card {
            background-color: var(--panel-color);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
            position: relative;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .image-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.2);
        }

        .generated-image {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
        }

        .image-actions {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--text-color);
            cursor: pointer;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 5px 10px;
            border-radius: 5px;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .action-btn.download::before {
            content: "‚Üì";
        }

        .action-btn.save::before {
            content: "üíæ";
        }

        .action-btn.share::before {
            content: "‚Üó";
        }

        .history-section {
            background-color: var(--panel-color);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(255, 215, 0, 0.2);
        }

        .history-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .history-title::before {
            content: "‚è≥";
        }

        .history-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-height: 300px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .history-item {
            background-color: rgba(0, 0, 0, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-item:hover {
            background-color: rgba(255, 215, 0, 0.1);
        }

        .history-item .time {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
        }

        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .loading-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 8px solid rgba(255, 215, 0, 0.3);
            border-top-color: var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            font-size: 1.5rem;
            color: var(--primary-color);
            text-align: center;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .loading-dots {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .loading-dots span {
            width: 10px;
            height: 10px;
            background-color: var(--primary-color);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out;
        }

        .loading-dots span:nth-child(1) {
            animation-delay: 0s;
        }

        .loading-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .loading-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        .error-message {
            color: var(--error-color);
            background-color: rgba(255, 56, 96, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            border-left: 4px solid var(--error-color);
        }

        .error-message.show {
            display: block;
        }

        .aspect-ratio-info {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            margin-top: 5px;
        }

        .advanced-settings {
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 20px;
        }

        .advanced-toggle {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--accent-color);
            cursor: pointer;
            margin-bottom: 15px;
            user-select: none;
        }

        .advanced-toggle::before {
            content: "‚ñ∂";
            font-size: 0.8rem;
            transition: transform 0.3s ease;
        }

        .advanced-toggle.active::before {
            transform: rotate(90deg);
        }

        .advanced-content {
            display: none;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
        }

        .advanced-content.show {
            display: block;
        }

        .social-share {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .share-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .share-btn:hover {
            transform: scale(1.1);
        }

        .share-btn.twitter {
            background-color: #1DA1F2;
        }

        .share-btn.facebook {
            background-color: #4267B2;
        }

        .share-btn.instagram {
            background: linear-gradient(45deg, #405DE6, #5851DB, #833AB4, #C13584, #E1306C, #FD1D1D);
        }

        .share-btn.whatsapp {
            background-color: #25D366;
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: rgba(255, 255, 255, 0.5);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            opacity: 0.3;
        }

        /* Responsive styles */
        @media (max-width: 1024px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 20px;
            }

            .logo h1 {
                font-size: 2rem;
            }

            .results-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
        }

        /* Cyberpunk neon glow effect */
        .cyberpunk-glow {
            position: relative;
        }

        .cyberpunk-glow::after {
            content: "";
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                var(--primary-color), 
                var(--accent-color), 
                var(--secondary-color), 
                var(--accent-color));
            background-size: 400%;
            z-index: -1;
            filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s ease;
            border-radius: inherit;
        }

        .cyberpunk-glow:hover::after {
            opacity: 0.7;
            animation: cyberpunk-glow-animation 8s linear infinite;
        }

        @keyframes cyberpunk-glow-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon"></div>
                <h1>DERY AI GENERATOR</h1>
            </div>
            <div class="social-share">
                <button class="share-btn twitter" title="Share on Twitter">ùïè</button>
                <button class="share-btn facebook" title="Share on Facebook">f</button>
                <button class="share-btn instagram" title="Share on Instagram">üì∑</button>
                <button class="share-btn whatsapp" title="Share on WhatsApp">üì±</button>
            </div>
        </header>

        <div class="error-message" id="errorMessage"></div>

        <div class="main-content">
            <div class="control-panel cyberpunk-glow">
                <h2 class="panel-title">Image Settings</h2>
                
                <div class="form-group">
                    <label for="prompt">Describe your image</label>
                    <textarea id="prompt" placeholder="A futuristic cityscape at night with neon lights and flying cars..."></textarea>
                </div>

                <div class="form-group">
                    <label for="aiModel">AI Model</label>
                    <select id="aiModel">
                        <option value="dall-e-3">DALL-E 3</option>
                        <option value="midjourney">Midjourney</option>
                        <option value="flux-turbo">Flux Turbo</option>
                        <option value="stable-diffusion">Stable Diffusion</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Style</label>
                    <div class="checkbox-group" id="styleContainer">
                        <!-- Styles will be added dynamically by JavaScript -->
                    </div>
                </div>

                <div class="form-group">
                    <label for="quality">Image Quality</label>
                    <select id="quality">
                        <option value="standard">Standard</option>
                        <option value="high">High Resolution</option>
                        <option value="ultra">Ultra HD</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="width">Width: <span id="widthValue">512</span>px</label>
                    <div class="range-container">
                        <input type="range" id="width" min="512" max="1024" step="64" value="512">
                        <span class="range-value" id="widthDisplay">512</span>
                    </div>
                    <div class="aspect-ratio-info" id="aspectRatioInfo">Aspect Ratio: 1:1</div>
                </div>

                <div class="form-group">
                    <label for="height">Height: <span id="heightValue">512</span>px</label>
                    <div class="range-container">
                        <input type="range" id="height" min="512" max="1024" step="64" value="512">
                        <span class="range-value" id="heightDisplay">512</span>
                    </div>
                </div>

                <div class="form-group">
                    <label for="imageCount">Number of Images</label>
                    <input type="number" id="imageCount" min="1" max="4" value="1">
                </div>

                <div class="form-group">
                    <label>Light Enhancement</label>
                    <div class="checkbox-group" id="lightEnhancementContainer">
                        <!-- Light enhancements will be added dynamically by JavaScript -->
                    </div>
                </div>

                <div class="form-group">
                    <label>Additional Features</label>
                    <div class="checkbox-group" id="additionalFeaturesContainer">
                        <!-- Additional features will be added dynamically by JavaScript -->
                    </div>
                </div>

                <div class="advanced-settings">
                    <div class="advanced-toggle" id="advancedToggle">Advanced Settings</div>
                    <div class="advanced-content" id="advancedContent">
                        <div class="form-group">
                            <label>Color Palette</label>
                            <div class="checkbox-group" id="colorPaletteContainer">
                                <!-- Color palettes will be added dynamically by JavaScript -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Composition</label>
                            <div class="checkbox-group" id="compositionContainer">
                                <!-- Compositions will be added dynamically by JavaScript -->
                            </div>
                        </div>

                        <div class="form-group">
                            <label>
                                <input type="checkbox" id="enhanceCheckbox">
                                Ultra Detail Enhancement
                            </label>
                        </div>
                    </div>
                </div>

                <button class="btn btn-generate" id="generateBtn">Generate Image</button>
            </div>

            <div class="results-container">
                <div class="results-grid" id="resultsGrid">
                    <div class="empty-state">
                        <div class="empty-state-icon">üñºÔ∏è</div>
                        <h3>No images generated yet</h3>
                        <p>Describe your vision and click "Generate Image" to create amazing AI art</p>
                    </div>
                </div>

                <div class="history-section">
                    <h2 class="history-title">Generation History</h2>
                    <div class="history-list" id="historyList">
                        <div class="empty-state">
                            <div class="empty-state-icon">‚è≥</div>
                            <p>Your generated images will appear here</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner"></div>
        <div class="loading-text">Generating Your Vision</div>
        <div class="loading-dots">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Data for dynamic options
            const styles = [
                "No Style", "Realistic", "Anime Style", "Digital Art", "Photography", 
                "Watercolor", "3D render", "Surrealisme", "3D Disney Character", 
                "Studio Ghibli", "Drawing Sketch", "Lowbrow Art", "Minimalism", 
                "Kinetic Art", "Sumi-e", "Ukiyo-e", "Claymation", "Brutalism", 
                "Stained Glass", "Grunge", "Horror", "Art Deco", "Fantasy Art", 
                "Graffiti Art", "Pixel Art", "Steampunk", "Cyberpunk", "Abstract", 
                "Cartoon", "Vintage", "Gothic", "Low Poly", "Pop Art", 
                "Impressionist Still Life", "Post-Impressionist", "Landscape", 
                "Abstract Expressionist", "Painting", "Pop Surrealist Illustration", 
                "Lowbrow Cartoon", "Bio Art Sculpture", "Land Art Installation", 
                "Performance Art Video", "Installation Art", "Experience", 
                "Conceptual Art", "Surrealist Photography", "Abstract Geometric", 
                "Geometric Abstraction", "Abstract Landscape", "Expressionist Still Life", 
                "Fauvist Portrait", "Art Nouveau Poster", "Cubist Landscape", 
                "Comic Book", "Chalk Art", "Neon Noir", "Amigurumi", "Origami", 
                "Zentangle", "Glitch Art", "Synthwave", "Art Nouveau", "Cubism", 
                "Impressionism", "Psychedelic", "Dystopian"
            ];

            const lightEnhancements = [
                "HDR", "Detail Ultra", "Cinematic", "Neon Glow", 
                "Photorealistic", "Drama Light"
            ];

            const additionalFeatures = [
                "Animation", "Transparency", "Tilt-Shift", "Hologram"
            ];

            const colorPalettes = [
                "Default", "Vibrant", "Pastel", "Monocrome", 
                "Warm Tones", "Cool Tones"
            ];

            const compositions = [
                "Default", "Close-up", "Wide Shot", "Macro", "Aerial"
            ];

            // DOM elements
            const styleContainer = document.getElementById('styleContainer');
            const lightEnhancementContainer = document.getElementById('lightEnhancementContainer');
            const additionalFeaturesContainer = document.getElementById('additionalFeaturesContainer');
            const colorPaletteContainer = document.getElementById('colorPaletteContainer');
            const compositionContainer = document.getElementById('compositionContainer');
            const widthSlider = document.getElementById('width');
            const heightSlider = document.getElementById('height');
            const widthValue = document.getElementById('widthValue');
            const heightValue = document.getElementById('heightValue');
            const widthDisplay = document.getElementById('widthDisplay');
            const heightDisplay = document.getElementById('heightDisplay');
            const aspectRatioInfo = document.getElementById('aspectRatioInfo');
            const generateBtn = document.getElementById('generateBtn');
            const resultsGrid = document.getElementById('resultsGrid');
            const historyList = document.getElementById('historyList');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const errorMessage = document.getElementById('errorMessage');
            const advancedToggle = document.getElementById('advancedToggle');
            const advancedContent = document.getElementById('advancedContent');
            const promptInput = document.getElementById('prompt');
            const imageCountInput = document.getElementById('imageCount');
            const enhanceCheckbox = document.getElementById('enhanceCheckbox');

            // Initialize dynamic options
            function initializeOptions() {
                // Styles
                styles.forEach(style => {
                    const id = style.toLowerCase().replace(/\s+/g, '-');
                    styleContainer.innerHTML += `
                        <div class="checkbox-item">
                            <input type="checkbox" id="${id}" name="style" value="${style}">
                            <label for="${id}">${style}</label>
                        </div>
                    `;
                });

                // Light Enhancements
                lightEnhancements.forEach(enhancement => {
                    const id = enhancement.toLowerCase().replace(/\s+/g, '-');
                    lightEnhancementContainer.innerHTML += `
                        <div class="checkbox-item">
                            <input type="checkbox" id="${id}" name="light-enhancement" value="${enhancement}">
                            <label for="${id}">${enhancement}</label>
                        </div>
                    `;
                });

                // Additional Features
                additionalFeatures.forEach(feature => {
                    const id = feature.toLowerCase().replace(/\s+/g, '-');
                    additionalFeaturesContainer.innerHTML += `
                        <div class="checkbox-item">
                            <input type="checkbox" id="${id}" name="additional-feature" value="${feature}">
                            <label for="${id}">${feature}</label>
                        </div>
                    `;
                });

                // Color Palettes
                colorPalettes.forEach(palette => {
                    const id = palette.toLowerCase().replace(/\s+/g, '-');
                    colorPaletteContainer.innerHTML += `
                        <div class="checkbox-item">
                            <input type="radio" id="${id}" name="color-palette" value="${palette}" ${palette === 'Default' ? 'checked' : ''}>
                            <label for="${id}">${palette}</label>
                        </div>
                    `;
                });

                // Compositions
                compositions.forEach(composition => {
                    const id = composition.toLowerCase().replace(/\s+/g, '-');
                    compositionContainer.innerHTML += `
                        <div class="checkbox-item">
                            <input type="radio" id="${id}" name="composition" value="${composition}" ${composition === 'Default' ? 'checked' : ''}>
                            <label for="${id}">${composition}</label>
                        </div>
                    `;
                });
            }

            // Update aspect ratio info
            function updateAspectRatio() {
                const width = parseInt(widthSlider.value);
                const height = parseInt(heightSlider.value);
                
                // Calculate greatest common divisor
                function gcd(a, b) {
                    return b ? gcd(b, a % b) : a;
                }
                
                const divisor = gcd(width, height);
                const ratioWidth = width / divisor;
                const ratioHeight = height / divisor;
                
                aspectRatioInfo.textContent = `Aspect Ratio: ${ratioWidth}:${ratioHeight}`;
            }

            // Toggle advanced settings
            advancedToggle.addEventListener('click', function() {
                this.classList.toggle('active');
                advancedContent.classList.toggle('show');
            });

            // Update slider values
            widthSlider.addEventListener('input', function() {
                widthValue.textContent = this.value;
                widthDisplay.textContent = this.value;
                updateAspectRatio();
            });

            heightSlider.addEventListener('input', function() {
                heightValue.textContent = this.value;
                heightDisplay.textContent = this.value;
                updateAspectRatio();
            });

            // Generate image
            generateBtn.addEventListener('click', async function() {
                const prompt = promptInput.value.trim();
                if (!prompt) {
                    showError("Please enter a description for your image");
                    return;
                }

                // Get selected options
                const aiModel = document.getElementById('aiModel').value;
                const quality = document.getElementById('quality').value;
                const width = widthSlider.value;
                const height = heightSlider.value;
                const imageCount = parseInt(imageCountInput.value);
                
                // Get selected styles
                const selectedStyles = Array.from(document.querySelectorAll('input[name="style"]:checked'))
                    .map(checkbox => checkbox.value);
                
                // Get selected light enhancements
                const selectedLightEnhancements = Array.from(document.querySelectorAll('input[name="light-enhancement"]:checked'))
                    .map(checkbox => checkbox.value);
                
                // Get selected additional features
                const selectedAdditionalFeatures = Array.from(document.querySelectorAll('input[name="additional-feature"]:checked'))
                    .map(checkbox => checkbox.value);
                
                // Get selected color palette
                const selectedColorPalette = document.querySelector('input[name="color-palette"]:checked').value;
                
                // Get selected composition
                const selectedComposition = document.querySelector('input[name="composition"]:checked').value;
                
                // Check if enhance is selected
                const enhance = enhanceCheckbox.checked;

                // Build the full prompt
                let fullPrompt = prompt;
                
                if (selectedStyles.length > 0) {
                    fullPrompt += `, ${selectedStyles.join(', ')} style`;
                }
                
                if (selectedLightEnhancements.length > 0) {
                    fullPrompt += `, ${selectedLightEnhancements.join(', ')}`;
                }
                
                if (selectedAdditionalFeatures.length > 0) {
                    fullPrompt += `, ${selectedAdditionalFeatures.join(', ')}`;
                }
                
                if (selectedColorPalette !== 'Default') {
                    fullPrompt += `, ${selectedColorPalette} color palette`;
                }
                
                if (selectedComposition !== 'Default') {
                    fullPrompt += `, ${selectedComposition} composition`;
                }
                
                if (enhance) {
                    fullPrompt += `, ultra detailed, hyper realistic, 8k`;
                }
                
                fullPrompt += `, ${quality} quality`;
                
                // Show loading overlay
                loadingOverlay.classList.add('active');
                
                try {
                    // Clear any previous error
                    hideError();
                    
                    // Clear results grid if it's the empty state
                    if (resultsGrid.querySelector('.empty-state')) {
                        resultsGrid.innerHTML = '';
                    }
                    
                    // Generate multiple images if requested
                    const imagePromises = [];
                    for (let i = 0; i < imageCount; i++) {
                        imagePromises.push(generateImage(fullPrompt, width, height, aiModel));
                    }
                    
                    // Wait for all images to be generated
                    const imageUrls = await Promise.all(imagePromises);
                    
                    // Display the generated images
                    imageUrls.forEach((url, index) => {
                        if (url) {
                            const imageCard = createImageCard(url, fullPrompt);
                            // Prepend the new image to the top of the grid
                            resultsGrid.insertBefore(imageCard, resultsGrid.firstChild);
                            
                            // Add to history
                            addToHistory(url, fullPrompt);
                        }
                    });
                    
                } catch (error) {
                    console.error('Error generating image:', error);
                    showError("Failed to generate image. Please try again with a different prompt.");
                } finally {
                    // Hide loading overlay
                    loadingOverlay.classList.remove('active');
                }
            });

            // Generate image using API
            async function generateImage(prompt, width, height, model) {
                // Encode the prompt for URL
                const encodedPrompt = encodeURIComponent(prompt);
                
                // Build the API URL based on selected model
                let apiUrl;
                switch(model) {
                    case 'dall-e-3':
                        apiUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=${width}&height=${height}&model=dall-e-3&nologo=true`;
                        break;
                    case 'midjourney':
                        apiUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=${width}&height=${height}&model=midjourney&nologo=true`;
                        break;
                    case 'flux-turbo':
                        apiUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=${width}&height=${height}&model=flux-turbo&nologo=true`;
                        break;
                    case 'stable-diffusion':
                        apiUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=${width}&height=${height}&model=stable-diffusion&nologo=true`;
                        break;
                    default:
                        apiUrl = `https://image.pollinations.ai/prompt/${encodedPrompt}?width=${width}&height=${height}&nologo=true`;
                }
                
                try {
                    // Fetch the image
                    const response = await fetch(apiUrl);
                    
                    if (!response.ok) {
                        throw new Error(`API request failed with status ${response.status}`);
                    }
                    
                    // Get the image URL
                    const imageUrl = response.url;
                    return imageUrl;
                } catch (error) {
                    console.error('Error in generateImage:', error);
                    throw error;
                }
            }

            // Create image card for display
            function createImageCard(imageUrl, prompt) {
                const timestamp = new Date().toLocaleString();
                
                const card = document.createElement('div');
                card.className = 'image-card cyberpunk-glow';
                card.innerHTML = `
                    <img src="${imageUrl}" alt="${prompt}" class="generated-image">
                    <div class="image-actions">
                        <button class="action-btn download" title="Download"></button>
                        <button class="action-btn save" title="Save to history"></button>
                        <button class="action-btn share" title="Share"></button>
                    </div>
                `;
                
                // Add event listeners to buttons
                const downloadBtn = card.querySelector('.download');
                const saveBtn = card.querySelector('.save');
                const shareBtn = card.querySelector('.share');
                
                downloadBtn.addEventListener('click', () => downloadImage(imageUrl, prompt));
                saveBtn.addEventListener('click', () => addToHistory(imageUrl, prompt, true));
                shareBtn.addEventListener('click', () => shareImage(imageUrl, prompt));
                
                return card;
            }

            // Add image to history
            function addToHistory(imageUrl, prompt, showNotification = false) {
                // Remove empty state if it exists
                if (historyList.querySelector('.empty-state')) {
                    historyList.innerHTML = '';
                }
                
                const timestamp = new Date().toLocaleString();
                
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `
                    <span class="prompt">${truncatePrompt(prompt)}</span>
                    <span class="time">${timestamp}</span>
                `;
                
                // Prepend to keep newest at top
                historyList.insertBefore(historyItem, historyList.firstChild);
                
                // Add click event to view the image
                historyItem.addEventListener('click', () => {
                    viewImageInModal(imageUrl, prompt);
                });
                
                if (showNotification) {
                    showNotificationMessage('Image saved to history');
                }
            }

            // View image in modal
            function viewImageInModal(imageUrl, prompt) {
                const modal = document.createElement('div');
                modal.style.position = 'fixed';
                modal.style.top = '0';
                modal.style.left = '0';
                modal.style.right = '0';
                modal.style.bottom = '0';
                modal.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
                modal.style.display = 'flex';
                modal.style.flexDirection = 'column';
                modal.style.alignItems = 'center';
                modal.style.justifyContent = 'center';
                modal.style.zIndex = '2000';
                modal.style.padding = '20px';
                
                modal.innerHTML = `
                    <img src="${imageUrl}" alt="${prompt}" style="max-width: 90%; max-height: 80%; object-fit: contain;">
                    <p style="margin-top: 20px; color: white; max-width: 80%; text-align: center;">${prompt}</p>
                    <div style="margin-top: 20px; display: flex; gap: 15px;">
                        <button id="modalDownload" style="padding: 10px 20px; background: var(--primary-color); color: black; border: none; border-radius: 5px; cursor: pointer;">Download</button>
                        <button id="modalShare" style="padding: 10px 20px; background: var(--accent-color); color: black; border: none; border-radius: 5px; cursor: pointer;">Share</button>
                        <button id="modalClose" style="padding: 10px 20px; background: #333; color: white; border: none; border-radius: 5px; cursor: pointer;">Close</button>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                // Add event listeners
                document.getElementById('modalDownload').addEventListener('click', () => {
                    downloadImage(imageUrl, prompt);
                });
                
                document.getElementById('modalShare').addEventListener('click', () => {
                    shareImage(imageUrl, prompt);
                });
                
                document.getElementById('modalClose').addEventListener('click', () => {
                    document.body.removeChild(modal);
                });
                
                // Close modal when clicking outside the image
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        document.body.removeChild(modal);
                    }
                });
            }

            // Download image
            function downloadImage(imageUrl, prompt) {
                const link = document.createElement('a');
                link.href = imageUrl;
                // Create a filename from the prompt (first 20 chars) and timestamp
                const filename = `dery-ai-${prompt.substring(0, 20).replace(/\s+/g, '-')}-${Date.now()}.jpg`;
                link.download = filename;
                link.click();
                
                showNotificationMessage('Download started');
            }

            // Share image
            function shareImage(imageUrl, prompt) {
                if (navigator.share) {
                    navigator.share({
                        title: 'AI Generated Image',
                        text: `Check out this AI generated image: ${prompt}`,
                        url: imageUrl
                    }).catch(err => {
                        console.log('Error sharing:', err);
                        fallbackShare(imageUrl, prompt);
                    });
                } else {
                    fallbackShare(imageUrl, prompt);
                }
            }

            // Fallback for browsers that don't support Web Share API
            function fallbackShare(imageUrl, prompt) {
                const shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(`Check out this AI generated image: ${prompt}`)}&url=${encodeURIComponent(imageUrl)}`;
                window.open(shareUrl, '_blank');
            }

            // Show notification message
            function showNotificationMessage(message) {
                const notification = document.createElement('div');
                notification.textContent = message;
                notification.style.position = 'fixed';
                notification.style.bottom = '20px';
                notification.style.left = '50%';
                notification.style.transform = 'translateX(-50%)';
                notification.style.backgroundColor = 'var(--primary-color)';
                notification.style.color = 'black';
                notification.style.padding = '10px 20px';
                notification.style.borderRadius = '5px';
                notification.style.zIndex = '1000';
                notification.style.boxShadow = '0 2px 10px rgba(0, 0, 0, 0.2)';
                notification.style.animation = 'fadeInOut 3s forwards';
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 3000);
            }

            // Show error message
            function showError(message) {
                errorMessage.textContent = message;
                errorMessage.classList.add('show');
                
                // Scroll to error message
                errorMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }

            // Hide error message
            function hideError() {
                errorMessage.classList.remove('show');
            }

            // Truncate prompt for display
            function truncatePrompt(prompt, maxLength = 30) {
                if (prompt.length <= maxLength) return prompt;
                return prompt.substring(0, maxLength) + '...';
            }

            // Initialize social share buttons
            function initSocialShare() {
                const twitterBtn = document.querySelector('.share-btn.twitter');
                const facebookBtn = document.querySelector('.share-btn.facebook');
                const instagramBtn = document.querySelector('.share-btn.instagram');
                const whatsappBtn = document.querySelector('.share-btn.whatsapp');
                
                twitterBtn.addEventListener('click', () => {
                    const url = encodeURIComponent(window.location.href);
                    const text = encodeURIComponent("Check out DERY AI GENERATOR - Amazing AI image generation tool!");
                    window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
                });
                
                facebookBtn.addEventListener('click', () => {
                    const url = encodeURIComponent(window.location.href);
                    window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
                });
                
                whatsappBtn.addEventListener('click', () => {
                    const url = encodeURIComponent(window.location.href);
                    const text = encodeURIComponent("Check out DERY AI GENERATOR - Amazing AI image generation tool!");
                    window.open(`https://wa.me/?text=${text}%20${url}`, '_blank');
                });
                
                instagramBtn.addEventListener('click', () => {
                    alert("To share on Instagram, save an image and post it directly on the app.");
                });
            }

            // Initialize the app
            function init() {
                initializeOptions();
                updateAspectRatio();
                initSocialShare();
                
                // Add animation to logo on load
                const logoIcon = document.querySelector('.logo-icon');
                setTimeout(() => {
                    logoIcon.style.transform = 'rotate(360deg)';
                    logoIcon.style.transition = 'transform 1s ease';
                }, 500);
                
                setTimeout(() => {
                    logoIcon.style.transform = 'rotate(0deg)';
                }, 1500);
            }

            // Start the app
            init();
        });
    </script>
</body>
</html>